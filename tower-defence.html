{
type: uploaded file
fileName: tower-defence.html
fullContent:
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Tower Defence Collection</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
        :root {
            --bg: #0b0f19;
            --card: #151a26;
            --accent: #3366cc;
            --neon: #00ffff;
            --danger: #ff3366;
            --text: #e0e6ed;
        }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: 'Segoe UI', Tahoma, sans-serif; }
        
        /* Header & Layout */
        header { background: #050810; padding: 20px; text-align: center; border-bottom: 1px solid #223; }
        header h1 { margin: 0; font-weight: 300; letter-spacing: 2px; text-transform: uppercase; color: var(--neon); text-shadow: 0 0 10px rgba(0,255,255,0.3); }
        
        .container { max-width: 1000px; margin: 40px auto; padding: 0 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        
        /* Game Cards */
        .card { background: var(--card); border: 1px solid #2a3040; border-radius: 12px; overflow: hidden; transition: transform 0.2s, box-shadow 0.2s; display: flex; flex-direction: column; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.5); border-color: var(--accent); }
        .card-header { height: 140px; background: linear-gradient(45deg, #1a202e, #252b3d); display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; }
        .card-header h2 { font-size: 1.5em; z-index: 2; margin: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
        .card-body { padding: 20px; flex: 1; display: flex; flex-direction: column; }
        .card p { color: #8b9bb4; line-height: 1.5; font-size: 0.95em; flex: 1; }
        .tags { display: flex; gap: 8px; margin-bottom: 15px; }
        .tag { font-size: 0.75em; padding: 4px 8px; border-radius: 4px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); }
        
        .btn { border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 1em; width: 100%; transition: 0.2s; }
        .btn-play { background: linear-gradient(90deg, var(--accent), #4d88ff); color: white; }
        .btn-play:hover { box-shadow: 0 0 15px rgba(51,102,204,0.4); }

        /* MODAL SYSTEM */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 1000; align-items: center; justify-content: center;
            backdrop-filter: blur(5px);
        }
        .modal.active { display: flex; }
        
        .game-window {
            background: #111; border: 1px solid #333; border-radius: 8px;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
            position: relative; display: flex; flex-direction: column;
            max-width: 95vw; max-height: 95vh;
        }

        /* Top Bar inside Modal */
        .gw-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px 20px; background: #1a1a1a; border-bottom: 1px solid #333;
        }
        .gw-stats { display: flex; gap: 20px; font-family: monospace; font-size: 1.1em; color: #fff; }
        .stat-item span { color: var(--neon); }
        .gw-close { background: #333; border: none; color: #fff; width: 30px; height: 30px; border-radius: 4px; cursor: pointer; }
        .gw-close:hover { background: var(--danger); }

        /* Canvas Area */
        .canvas-wrapper { position: relative; background: #000; overflow: hidden; margin: 0 auto; }
        canvas { display: block; cursor: crosshair; }

        /* Controls Area (Bottom) */
        .gw-controls {
            padding: 15px; background: #151515; border-top: 1px solid #333;
            display: flex; gap: 15px; align-items: center; justify-content: space-between;
        }
        .tower-selector { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; }
        .t-btn {
            background: #222; border: 1px solid #444; color: #ccc;
            padding: 8px 12px; border-radius: 6px; cursor: pointer;
            display: flex; flex-direction: column; align-items: center; min-width: 70px;
        }
        .t-btn:hover { background: #2a2a2a; border-color: #666; }
        .t-btn.selected { border-color: var(--neon); background: rgba(0,255,255,0.05); box-shadow: 0 0 10px rgba(0,255,255,0.1); }
        .t-name { font-size: 0.8em; font-weight: bold; margin-bottom: 2px; }
        .t-cost { font-size: 0.75em; color: #ffd700; }

        .game-actions { display: flex; gap: 10px; }
        .btn-action { padding: 10px 20px; background: #333; color: white; border: 1px solid #555; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .btn-action.glow { border-color: var(--neon); color: var(--neon); }
        .btn-action.glow:hover { background: var(--neon); color: #000; }

        /* Inspector (Side or Overlay) */
        .inspector-overlay {
            position: absolute; bottom: 80px; right: 20px; width: 220px;
            background: rgba(15, 20, 30, 0.95); border: 1px solid #444; border-radius: 8px;
            padding: 15px; display: none; pointer-events: auto; backdrop-filter: blur(4px);
        }
        .insp-header { color: var(--neon); font-weight: bold; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 5px;}
        .insp-stat { display: flex; justify-content: space-between; font-size: 0.9em; color: #aaa; margin-bottom: 4px; }
        .insp-stat b { color: #fff; }
        .insp-actions { margin-top: 10px; display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .btn-upg { background: #003300; border: 1px solid #006600; color: #afa; padding: 6px; border-radius: 4px; cursor: pointer; font-size: 0.8em; }
        .btn-sell { background: #330000; border: 1px solid #660000; color: #faa; padding: 6px; border-radius: 4px; cursor: pointer; font-size: 0.8em; }
        
        /* Specific Styles for Neon Citadel Upgrades */
        .neon-upgrades { display: flex; flex-direction: column; gap: 5px; margin-top: 8px; }
        .btn-neon-up { display: flex; justify-content: space-between; background: #222; border: 1px solid #444; color: #eee; padding: 6px; cursor: pointer; font-size: 0.8em; border-radius: 4px; }
        .btn-neon-up:hover { border-color: var(--neon); }

        /* Menu Overlay inside Game */
        .game-menu {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.85); z-index: 10;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .diff-selector { display: flex; gap: 10px; margin-bottom: 20px; }
        .diff-btn { padding: 10px 20px; background: transparent; border: 1px solid #555; color: #888; cursor: pointer; border-radius: 4px; }
        .diff-btn.active { border-color: var(--neon); color: var(--neon); background: rgba(0,255,255,0.1); }

    </style>
</head>
<body>

<header>
    <h1>Defence <span style="color:white">Collection</span></h1>
</header>

<div class="container">
    <div class="grid">
        <div class="card">
            <div class="card-header" style="border-bottom: 4px solid #00ff00;">
                <h2 style="color:#00ff00">SENTINEL GRID</h2>
            </div>
            <div class="card-body">
                <div class="tags"><span class="tag">Classic</span><span class="tag">Maze Building</span></div>
                <p>The classic strategy game. Build your own maze. Enemies find the shortest path—block them effectively but keep a route open.</p>
                <button class="btn btn-play" onclick="App.openGame('sentinel')">PLAY NOW</button>
            </div>
        </div>

        <div class="card">
            <div class="card-header" style="border-bottom: 4px solid #ffaa00;">
                <h2 style="color:#ffaa00">VECTOR VALLEY</h2>
            </div>
            <div class="card-body">
                <div class="tags"><span class="tag">Fixed Path</span><span class="tag">Casual</span></div>
                <p>A vibrant fixed-path defense. Choose your difficulty. Features persistent building and upgraded particle visuals.</p>
                <button class="btn btn-play" onclick="App.openGame('vector')">PLAY NOW</button>
            </div>
        </div>

        <div class="card">
            <div class="card-header" style="border-bottom: 4px solid #00ffff;">
                <h2 style="color:#00ffff">NEON CITADEL</h2>
            </div>
            <div class="card-body">
                <div class="tags"><span class="tag">Flagship</span><span class="tag">Hardcore</span><span class="tag">Complex</span></div>
                <p>The ultimate experience. Smart AI, destructible towers, complex upgrade trees, elementals, and massive bosses.</p>
                <button class="btn btn-play" onclick="App.openGame('neon')">PLAY NOW</button>
            </div>
        </div>
    </div>
</div>

<div id="game-modal" class="modal">
    <div class="game-window">
        <div class="gw-header">
            <div class="gw-stats">
                <div class="stat-item">WAVE <span id="ui-wave">1</span></div>
                <div class="stat-item">$<span id="ui-money">0</span></div>
                <div class="stat-item">♥ <span id="ui-lives">20</span></div>
            </div>
            <button class="gw-close" onclick="App.closeGame()">×</button>
        </div>

        <div class="canvas-wrapper">
            <canvas id="game-canvas" width="900" height="600"></canvas>
            
            <div id="ingame-menu" class="game-menu" style="display:none;">
                <h2 id="menu-title" style="color:var(--neon); letter-spacing:4px;">PREPARE DEFENCE</h2>
                <div id="diff-container" class="diff-selector" style="display:none;">
                    <button class="diff-btn" onclick="App.setDiff('easy', this)">EASY</button>
                    <button class="diff-btn active" onclick="App.setDiff('med', this)">NORMAL</button>
                    <button class="diff-btn" onclick="App.setDiff('hard', this)">HARD</button>
                </div>
                <button class="btn btn-play" style="width:200px;" onclick="App.startGame()">START GAME</button>
            </div>

            <div id="inspector" class="inspector-overlay">
                <div class="insp-header" id="insp-name">Selected</div>
                <div id="insp-content">
                    </div>
                <div class="insp-actions" id="insp-actions-std" style="display:none">
                    <button class="btn-upg" onclick="App.action('upgrade')">UPGRADE <br><span id="upg-cost">$0</span></button>
                    <button class="btn-sell" onclick="App.action('sell')">SELL <br><span id="sell-cost">$0</span></button>
                </div>
                <div class="neon-upgrades" id="insp-actions-neon" style="display:none">
                    <button class="btn-neon-up" onclick="App.action('upg_dmg')"><span>DMG</span> <span id="nc-cost-dmg">$100</span></button>
                    <button class="btn-neon-up" onclick="App.action('upg_rng')"><span>RNG</span> <span id="nc-cost-rng">$100</span></button>
                    <button class="btn-neon-up" onclick="App.action('upg_rate')"><span>SPD</span> <span id="nc-cost-rate">$100</span></button>
                    <button class="btn-sell" style="width:100%; margin-top:5px;" onclick="App.action('sell')">DISMANTLE <span id="nc-sell">$50</span></button>
                </div>
            </div>
        </div>

        <div class="gw-controls">
            <div class="tower-selector" id="tower-row">
                </div>
            <div class="game-actions">
                <button class="btn-action glow" onclick="App.action('next_wave')">NEXT WAVE</button>
            </div>
        </div>
    </div>
</div>

<script src="sentinel-grid.js"></script>
<script src="vector-valley.js"></script>
<script src="neon-citadel.js"></script>

<script>
const App = {
    currentGame: null,
    gameId: null,
    loopId: null,
    canvas: document.getElementById('game-canvas'),
    ctx: document.getElementById('game-canvas').getContext('2d'),
    
    // Config state
    difficulty: 'med',

    openGame: (id) => {
        App.gameId = id;
        document.getElementById('game-modal').classList.add('active');
        document.getElementById('ingame-menu').style.display = 'flex';
        
        // Reset UI
        document.getElementById('inspector').style.display = 'none';
        document.getElementById('diff-container').style.display = (id === 'vector') ? 'flex' : 'none';
        
        // Initialize appropriate engine wrapper
        if (id === 'sentinel') App.currentGame = window.SentinelGame;
        if (id === 'vector') App.currentGame = window.VectorGame;
        if (id === 'neon') App.currentGame = window.NeonGame;

        if (App.currentGame) {
            // Build UI buttons based on game config
            App.buildControls();
            // Init game in background (paused/waiting)
            App.currentGame.init(App.canvas, { difficulty: App.difficulty });
            App.loop();
        }
    },

    closeGame: () => {
        if(App.loopId) cancelAnimationFrame(App.loopId);
        if(App.currentGame && App.currentGame.stop) App.currentGame.stop();
        App.currentGame = null;
        document.getElementById('game-modal').classList.remove('active');
    },

    setDiff: (d, btn) => {
        App.difficulty = d;
        document.querySelectorAll('.diff-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    },

    startGame: () => {
        document.getElementById('ingame-menu').style.display = 'none';
        // Re-init with selected difficulty for Vector Valley
        if(App.currentGame) App.currentGame.init(App.canvas, { difficulty: App.difficulty });
    },

    buildControls: () => {
        const row = document.getElementById('tower-row');
        row.innerHTML = '';
        const conf = App.currentGame.conf.towers;
        for (let k in conf) {
            let t = conf[k];
            let btn = document.createElement('div');
            btn.className = 't-btn';
            btn.id = 'btn-' + k;
            btn.onclick = () => {
                App.currentGame.setBuild(k);
                document.querySelectorAll('.t-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
            };
            btn.innerHTML = `<span class="t-name" style="color:${t.color}">${t.name}</span><span class="t-cost">$${t.cost}</span>`;
            row.appendChild(btn);
        }
    },

    action: (act) => {
        if (!App.currentGame) return;
        if (act === 'next_wave') App.currentGame.startWave();
        else if (act === 'upgrade') App.currentGame.upgrade();
        else if (act === 'sell') App.currentGame.sell();
        
        // Neon specific
        else if (act.startsWith('upg_')) App.currentGame.upgrade(act.replace('upg_', ''));
        
        App.updateUI();
    },

    loop: () => {
        if (!App.currentGame) return;
        App.currentGame.update();
        App.currentGame.draw(App.ctx);
        App.updateUI();
        App.updateInspector();
        App.loopId = requestAnimationFrame(App.loop);
    },

    updateUI: () => {
        const s = App.currentGame;
        document.getElementById('ui-wave').innerText = s.wave;
        document.getElementById('ui-money').innerText = Math.floor(s.money);
        document.getElementById('ui-lives').innerText = s.lives;
    },

    updateInspector: () => {
        const sel = App.currentGame.sel;
        const panel = document.getElementById('inspector');
        
        // Clear build selection if user canceled it in game
        if (!App.currentGame.buildMode) {
             document.querySelectorAll('.t-btn').forEach(b => b.classList.remove('selected'));
        }

        if (!sel) {
            panel.style.display = 'none';
            return;
        }
        panel.style.display = 'block';
        document.getElementById('insp-name').innerText = sel.name;
        document.getElementById('insp-name').style.color = sel.color;

        let html = '';
        if (sel.dmg) html += `<div class="insp-stat"><span>Damage</span><b>${sel.dmg}</b></div>`;
        if (sel.r) html += `<div class="insp-stat"><span>Range</span><b>${Math.floor(sel.r)}</b></div>`;
        if (sel.level) html += `<div class="insp-stat"><span>Level</span><b>${sel.level}</b></div>`;
        if (sel.kills) html += `<div class="insp-stat"><span>Kills</span><b>${sel.kills}</b></div>`;
        document.getElementById('insp-content').innerHTML = html;

        // Show appropriate buttons
        if (App.gameId === 'neon') {
            document.getElementById('insp-actions-std').style.display = 'none';
            document.getElementById('insp-actions-neon').style.display = 'flex';
            // Update neon costs
            const base = App.currentGame.conf.towers[sel.type].cost;
            document.getElementById('nc-cost-dmg').innerText = '$'+Math.floor(base * 0.5 * ((sel.attrLevels.dmg||0)+1));
            document.getElementById('nc-cost-rng').innerText = '$'+Math.floor(base * 0.4 * ((sel.attrLevels.rng||0)+1));
            document.getElementById('nc-cost-rate').innerText = '$'+Math.floor(base * 0.6 * ((sel.attrLevels.rate||0)+1));
            document.getElementById('nc-sell').innerText = '$'+Math.floor(base * 0.5);
        } else {
            document.getElementById('insp-actions-std').style.display = 'grid';
            document.getElementById('insp-actions-neon').style.display = 'none';
            
            // Standard upgrade cost logic
            let def = App.currentGame.conf.towers[sel.type];
            let upCost = Math.floor(def.cost * 0.8 * (sel.level || 1));
            document.getElementById('upg-cost').innerText = '$' + upCost;
            document.getElementById('sell-cost').innerText = '$' + Math.floor(def.cost*0.5);
        }
    }
};

// Canvas Click Routing
document.getElementById('game-canvas').addEventListener('mousedown', (e) => {
    if (!App.currentGame) return;
    const r = App.canvas.getBoundingClientRect();
    App.currentGame.click(e.clientX - r.left, e.clientY - r.top);
});
</script>
</body>
</html>
}
