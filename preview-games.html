<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Preview Games | Games & Programs</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root { --primary: #3366cc; --muted: #666; --card: #e6f0ff; --bg: #f6f8fb; --neon: #00FFFF;}
    body { background: var(--bg); font-family: 'Inter', 'Segoe UI', Arial, sans-serif; margin:0;}
    header { background: var(--primary); color: #fff; padding: 12px 16px; text-align:center; font-weight:700;}
    .container { max-width:900px; margin:24px auto; background:#fff; padding:16px; border-radius:10px; box-shadow:0 8px 24px rgba(51,102,204,0.08);}
    .game-grid {display:grid; grid-template-columns:repeat(auto-fit, minmax(240px,1fr)); gap:12px;}
    .card {background:var(--card); padding:12px; border-radius:8px; border:1px solid #99ccff; display:flex; flex-direction:column; justify-content:space-between;}
    .card h3 {margin:0 0 6px 0; color:var(--primary);}
    .card p {color:var(--muted); margin:0 0 8px 0; flex:1;}
    .btn {background:var(--primary); color:#fff; padding:8px 10px; border-radius:6px; text-decoration:none; font-weight:700; border:none; cursor:pointer;}
    .btn.secondary {background:#fff; color:var(--primary); border:1px solid #99ccff;}
    .modal {display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center;}
    .modal-content {background: #000; padding:24px 18px; border-radius:10px; border:4px solid #fff; box-shadow:0 0 30px #aaa; text-align:center;}
    .modal h2 { color: #fff; margin-top:0;}
    
    footer { text-align:center; padding:16px; color:#999;}
    footer a { color: var(--primary);}

    /* Report form styling */
    .report.card { margin-top:16px; padding:14px; gap:8px; }
    .report h3 { margin:0 0 8px 0; color:var(--primary); }
    .report label { display:block; margin:10px 0 6px 0; color:var(--primary); font-weight:700; font-size:0.95rem; }
    .report input[type="text"], .report textarea { width:100%; padding:10px; border-radius:8px; border:1px solid rgba(51,102,204,0.18); background: #fff; font-family: inherit; font-size: 0.95rem; box-sizing: border-box;}
    .report textarea { min-height:120px; resize:vertical; }
    #reportMessage { margin-top:10px;color:var(--muted); font-weight:600; }
    
    /* Minesweeper Styles (Classic) */
    #minesweeper-grid { display: grid; border: 1px solid #333; margin: 10px auto; background: #ccc;}
    .minesweeper-cell { width: 30px; height: 30px; background-color: #555; border: 1px solid #777; cursor: pointer; display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 1.1em; user-select: none; color: #eee; }
    .minesweeper-cell.revealed { background-color: #222; border: 1px solid #333; cursor: default; color: #00FFFF; }
    .minesweeper-cell.mine { background-color: #F00; color: #FFF; }
    .minesweeper-cell.flagged { background-color: #00AAAA; color: #FF0; }
    .minesweeper-cell[data-adjacent="1"] { color: #00F; } 
    .minesweeper-cell[data-adjacent="2"] { color: #080; } 
    .minesweeper-cell[data-adjacent="3"] { color: #F00; }
  </style>
</head>
<body>
  <header>Preview Games (Advance Users)</header>
  <div style="max-width:900px;margin:12px auto;text-align:right;">
    <a id="dashboardBtn" class="btn secondary" href="loggedIn.html" title="Open Dashboard">Dashboard</a>
  </div>
  <div class="container">
    <p style="color:#3366cc;font-weight:600;">Advance users can preview short, in-development games here and submit bug reports or suggestions.</p>
    <div class="game-grid" id="previewGrid">
      
      <div class="card">
        <h3>Space Invaders Plus</h3>
        <p>The "Plus" version with progressive waves and difficulty.</p>
        <button class="btn" id="runInvadersBtn">Play Now</button>
      </div>

      <div class="card">
        <h3>Minesweeper (Classic)</h3>
        <p>The simple logic game: clear a rectangular board containing hidden "mines".</p>
        <button class="btn" id="runMinesweeperBtn">Play Now</button>
      </div>

    </div>

    <div id="invadersModal" class="modal">
      <div class="modal-content">
        <h2>Space Invaders Plus</h2>
        <canvas id="invaders-canvas" width="420" height="420" style="background:#000; border: 2px solid #3366cc;"></canvas>
        <div style="display: flex; justify-content: space-between; padding: 0 10px; margin-top: 10px;">
             <p id="invaders-score" style="color:var(--primary); font-weight: 700; margin: 0; color: #FFD700;">Score: 0</p>
             <p id="invaders-message" style="color:#eee; min-height: 1.2em; margin: 0;">Press Start!</p>
        </div>
        <div style="display:flex; justify-content:center; gap:10px; margin-top:10px;">
            <button id="startInvadersBtn" class="btn" style="background:#00FF00; color:#000;">Start</button>
            <button id="closeInvadersModalBtn" class="btn" style="background:red;">Close Game</button>
        </div>
      </div>
    </div>

    <div id="minesweeperModal" class="modal">
        <div class="modal-content" style="background: #111; border-color: #3366cc;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                <h2 style="color:#3366cc; margin:0;">Minesweeper</h2>
                <button id="minesweeperModalCloseBtn" class="btn" style="background:transparent; border:1px solid #555;">X</button>
            </div>
            <div id="minesweeper-hud" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding: 0 5px; color:#fff;">
                <div id="mine-count" style="color: #FF0; font-weight: 700;">Mines: 10</div>
                <button id="newGameMinesweeperBtn" class="btn secondary" style="padding: 6px 10px; font-size: 0.9em;">New Game</button>
                <div id="minesweeper-timer" style="color: #3366cc; font-weight: 700;">Time: 0</div>
            </div>
            <div id="minesweeper-grid" oncontextmenu="return false;"></div>
            <p id="minesweeper-message" style="color:#3366cc; min-height: 1.2em; margin: 10px 0 0 0;">Click 'New Game' to start!</p>
        </div>
    </div>

     <section class="report card" aria-label="Report a bug">
      <h3>Report a bug or suggest an improvement</h3>
      <form id="reportForm">
        <label for="gameName">Game / Preview name</label>
        <input id="gameName" type="text" required placeholder="Name of the previewed game">
        <label for="reportText">Describe the issue or suggestion</label>
        <textarea id="reportText" required placeholder="What happened? How can it be improved?"></textarea>
        <button class="btn" type="submit" style="margin-top:10px;">Send Report</button>
      </form>
      <div id="reportMessage"></div>
    </section>
  </div>
  <footer>
    &copy; 2025 Games & Programs | Contact: <a href="questions.html">Questions & Comments</a>
  </footer>

  <script type="module" src="login.js?v=2"></script>
  <script type="module" src="minesweeper.js"></script>
  <script type="module" src="space-invaders-plus.js"></script>
  <script type="module">
    // Space Invaders Plus Hookup
    document.getElementById('runInvadersBtn').addEventListener('click', () => {
        // Open the modal corresponding to the ID in the original experimental logic
        const modal = document.getElementById('invadersModal');
        modal.style.display = 'flex';
        
        // If the script exposes an init function, call it.
        // space-invaders-plus.js usually auto-binds to the IDs (invaders-canvas, startInvadersBtn)
        // providing the elements exist when the script loaded. If they didn't exist then, we might need a manual start.
        if (typeof window.initInvadersPlus === 'function') window.initInvadersPlus();
    });

    document.getElementById('closeInvadersModalBtn').addEventListener('click', () => {
        document.getElementById('invadersModal').style.display = 'none';
        // Try to stop if function exists
        if (typeof window.stopInvaders === 'function') window.stopInvaders();
    });

    // Minesweeper Hookup
    document.getElementById('runMinesweeperBtn').addEventListener('click', () => {
        const modal = document.getElementById('minesweeperModal');
        modal.style.display = 'flex';
        if(typeof window.initMinesweeperGame === 'function') {
            window.initMinesweeperGame();
        }
    });

    document.getElementById('minesweeperModalCloseBtn').addEventListener('click', () => {
        document.getElementById('minesweeperModal').style.display = 'none';
    });
    
    // Report Form Logic
    document.getElementById('reportForm').addEventListener('submit', function (e) {
      e.preventDefault();
      var name = document.getElementById('gameName').value.trim();
      var text = document.getElementById('reportText').value.trim();
      var msgEl = document.getElementById('reportMessage');
      if (!name || !text) {
        msgEl.textContent = 'Please provide the game name and a description.';
        msgEl.style.color = 'var(--muted)';
        return;
      }
      msgEl.textContent = 'Thanks! Your report has been submitted.';
      msgEl.style.color = 'var(--primary)';
      setTimeout(function () {
        document.getElementById('reportForm').reset();
      }, 250);
    });
  </script>
</body>
</html>
