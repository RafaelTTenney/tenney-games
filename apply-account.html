<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Apply for Account - Password & PIN Guessers</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>
      (function(){
        emailjs.init("YOUR_EMAILJS_USER_ID"); // Replace with your EmailJS user ID
      })();
    </script>
</head>
<body>
    <div class="container">
        <h2>Apply for an Account</h2>
        <form id="applyForm">
            <label for="firstName">First Name *</label>
            <input type="text" id="firstName" name="firstName" required>
            
            <label for="lastName">Last Name *</label>
            <input type="text" id="lastName" name="lastName" required>
            
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" required>
            
            <label for="password">Password *</label>
            <input type="password" id="password" name="password" required>
            
            <label for="message">Why do you want an account? *</label>
            <textarea id="message" name="message" required></textarea>
            
            <button type="submit">Submit Application</button>
        </form>
        <p>
            <a href="forgot-password.html">Forgot your password?</a>
        </p>
    </div>
    <script>
    document.getElementById('applyForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const form = e.target;
        const username = (form.firstName.value[0] + form.lastName.value).toLowerCase();

        emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", {
            first_name: form.firstName.value,
            last_name: form.lastName.value,
            email: form.email.value,
            password: form.password.value,
            message: form.message.value,
            username: username
        })
        .then(function() {
            window.location.href = `account-application-success.html?name=${encodeURIComponent(form.firstName.value)}&username=${encodeURIComponent(username)}&newpass=${encodeURIComponent(form.password.value)}`;
        }, function(error) {
            alert('Failed to send application. Please try again.');
        });
    });
    </script>
</body>
</html>
